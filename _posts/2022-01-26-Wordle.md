---
layout: post
title: Can WORDLE be solved?
date:   2022-1-26T2:51:45+00:00
author: plonzari
categories: 
            - living
            - python
---

In the past months the Twitter has been overtaken by stacks of colored boxes. It is the fault of a 
new words-game: <a href="https://www.powerlanguage.co.uk/wordle/"> WORDLE </a>. Free and with a minimalistic design the game has 
received a well deserved attention.

<div style="text-align: center">
<a href="https://www.powerlanguage.co.uk/wordle/"> 
<img src="{{ site.baseurl }}/assets/images/WordleDesign.png" width="500" /></a>
</div>>

Each day a five letters word is proposed and you have six tries to guess it. For each guess the letters that in your guess which 
can be found in the solution are highlighted (orange for letters found in the same position and blue if not).

By now one can find quite a few articles discussing winning strategies and even web apps offering word suggestions 
for  the game. Given the apparent simplicity of the game I want a more exact answer to simple questions: can the game 
be solved for any proposed solution word? which is the best starting word?
For the moment I have no answers.

Let us start with properly setting up the game. One starts with a list (L) of possible guesses. For the original game
this list contains 12972 five letters words, some of them quite obscure. The solutions are chosen from a smaller 
sublist list (A) of 2315 more common words. We suppose the choice to be uniformly random. The 
goal is to always find the solution using less than six guesses. If the solution can always be found
we want to minimize the average number of guesses.


The game is defined by a tree where each node is a possible color configuration. The children of each node are the 
color configurations that can be obtained by adding another guess, for each possible guess and each possible 
solution compatible with the node. Let us suppose that we start with the word TRACE and the solution is either 
BELIE or BIBLE. A portion of the game tree would look like this:


<div style="text-align: center">
<a href="https://www.powerlanguage.co.uk/wordle/"> 
<img src="{{ site.baseurl }}/assets/images/WordleDiagram.png" width="500" /></a>
</div>>

The node of the tree is the empty configuration with 12972 x 2315 children on the first level. T
An important feature of each node (configuration) $$C$$ is the set $$S(C)$$ of solution compatible  with it. 
The moment this set contains only one solution, we can "guess" it at the next step and the game ends. In the tree has 
therefore five levels. The leaves are of two types:

1. nodes with only one compatible solution - they correspond to a correct guess at the next step.
2. nodes with more than one compatible solution. THey correspond to a  possible loss.

With each node we can associate a minimal average number of extra guesses needed to win, starting from that node,
let us call it $$g(C)$$. Each leaf of type one has by definition $$g(C)=1$$ and each leaf of type two has
$$g(C)=g_{loss}$$ where $$g_{loss}$$ is some big number. Using the <b> master equation </b>:

$$ g(C) =1+MIN_{All\, guesses, w} \left( \frac{\sum_{All\, solutions\, in S(C), s} g(C_{s,w})}{|S(C)|} \right) $$

where $$C_{s,w}$$ is the child of the node (configuration) $$C$$ obtained by adding the guess $$w$$ when 
the solution 
is $$s$$. Once solved this equation can answer all our questions and also provides the perfect strategy at 
every step. The game can always be solved if and only if the solution of  the master equation is independent of 
$$g_{loss}$$. Also, the child of the root with the highest average $g$ provide the perfect guess.
Unfortunately the full tree is quite big and very difficult to solve on my system, therefore a 
few shortcuts are needed. 

First I use the observation that if one inputs the words TROMP, RUGBY, FLANK, WHIST and CAVED, the resulting
configuration is unique for <b>most</b> possible solutions (thus providing the correct guess at the last step). 
Unfortunately there remain 16 pairs of solutions that cannot be thus distinguished, like MELON and LEMON or 
BIBLE and BELIE. The search is ongoing, as the existence of
a quintuple of words with unique configurations for each solution would prove that the game can be always solved.

Inspired by this, one can restrict the list of possible guesses. Obviously a game where not all words are 
allowed would provide a bound for the best strategy.








